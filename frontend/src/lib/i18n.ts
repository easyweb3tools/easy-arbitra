export type Locale = "en" | "zh";

export const LOCALE_COOKIE = "locale";

const messages: Record<Locale, Record<string, string>> = {
  en: {
    "app.subtitle": "Polymarket Smart Wallet Analyzer",
    "nav.dashboard": "Dashboard",
    "nav.discover": "Discover",
    "nav.explore": "Explore",
    "nav.tracking": "Tracking",
    "nav.more": "More",
    "nav.wallets": "Wallets",
    "nav.watchlist": "Watchlist",
    "nav.markets": "Markets",
    "nav.leaderboard": "Leaderboard",
    "nav.anomalies": "Anomalies",
    "nav.methodology": "Methodology",
    "lang.en": "EN",
    "lang.zh": "中文",

    "home.marketsIndexed": "Markets Indexed",
    "home.potentialWallets": "Potential Wallets (>=100 trades, PnL > 0)",
    "home.newPotential24h": "New Potential Wallets (24h)",
    "home.topRealized24h": "Top Realized PnL (24h)",
    "home.topAIConfidence": "Top AI Confidence",
    "home.aiAnalyzedTop5": "AI Analyzed in Top 5",
    "home.topPotential": "Top Potential Wallets",
    "home.viewAll": "View all",
    "home.trades": "trades",
    "home.realizedPnl": "realized PnL",
    "home.score": "score",
    "home.model": "model",
    "home.summaryFallback": "No AI summary yet.",

    "wallets.minTrades": "Min trades",
    "wallets.minPnl": "Min realized PnL",
    "wallets.apply": "Apply",
    "wallets.potentialCount": "Potential Wallets",
    "wallets.analyzedPage": "AI Analyzed (this page)",
    "wallets.filterRule": "Filter Rule",
    "wallets.ruleValue": "Trades desc + Positive PnL",
    "wallets.title": "Potential Wallets",
    "wallets.sortHint": "Default sorted by total trades (desc), then realized PnL (desc).",
    "wallets.tagPotential": "Potential",
    "wallets.tagAnalyzed": "AI analyzed",
    "wallets.tagNotAnalyzed": "Not analyzed",
    "wallets.strategyUnknown": "unknown",
    "wallets.unnamed": "Unnamed",

    "profile.layer1": "Layer1 PnL",
    "profile.realizedPnl": "Realized PnL",
    "profile.tradingPnl": "Trading PnL",
    "profile.makerRebates": "Maker Rebates",
    "profile.feesPaid": "Fees Paid",
    "profile.totalTrades": "Total Trades",
    "profile.volume30d": "Volume 30D",
    "profile.strategySnapshot": "Strategy Snapshot",
    "profile.score": "score",
    "profile.layer3": "Layer3 Timing Edge",
    "profile.label": "label",
    "profile.meanDt": "mean dt",
    "profile.samples": "samples",
    "profile.stddev": "stddev",
    "profile.pvalue": "p-value",
    "profile.aiAnalysis": "AI Analysis",
    "profile.aiKeySignals": "AI Key Signals",
    "profile.aiWarnings": "Risk Warnings",
    "profile.aiNoWarnings": "No explicit risk warnings.",
    "profile.aiGeneratedAt": "generated at",
    "profile.aiRawJson": "Raw AI JSON",
    "profile.aiOpenJson": "Open JSON",
    "profile.noSummary": "No summary from model.",
    "profile.model": "model",
    "profile.tokens": "tokens",
    "profile.noReport": "No AI report yet. Trigger analysis via backend API.",
    "profile.history": "history",
    "profile.evidence": "Evidence Snapshot",

    "markets.categoryPlaceholder": "Category e.g. Politics",
    "markets.apply": "Apply",
    "markets.title": "Markets",
    "markets.vol": "vol",
    "markets.liq": "liq",

    "leaderboard.title": "Leaderboard",
    "leaderboard.score": "score",
    "leaderboard.rank": "Rank",
    "leaderboard.name": "Name",
    "leaderboard.strategy": "Strategy",
    "leaderboard.smartScore": "Smart Score",
    "leaderboard.pnl": "PnL",
    "leaderboard.trades": "Trades",
    "leaderboard.tier": "Tier",
    "leaderboard.sortByScore": "Score",
    "leaderboard.sortByPnl": "PnL",
    "leaderboard.sortByTrades": "Trades",

    "positions.market": "Market",
    "positions.category": "Category",
    "positions.netSize": "Net Size",
    "positions.avgPrice": "Avg Price",
    "positions.tradeCount": "Trades",
    "positions.lastActive": "Last Active",
    "positions.title": "Positions",
    "positions.totalVolume": "Volume",

    "tradeHistory.title": "Trade History",
    "tradeHistory.time": "Time",
    "tradeHistory.market": "Market",
    "tradeHistory.outcome": "Outcome",
    "tradeHistory.action": "Action",
    "tradeHistory.price": "Price",
    "tradeHistory.size": "Size",
    "tradeHistory.fee": "Fee",
    "tradeHistory.buy": "Buy",
    "tradeHistory.sell": "Sell",
    "tradeHistory.yes": "Yes",
    "tradeHistory.no": "No",

    "pnlChart.title": "P&L History",
    "pnlChart.7d": "7D",
    "pnlChart.30d": "30D",
    "pnlChart.90d": "90D",

    "accountInfo.realizedPnl": "Realized PnL",
    "accountInfo.totalTrades": "Total Trades",
    "accountInfo.volume30d": "Volume 30D",
    "accountInfo.smartScore": "Smart Score",
    "accountInfo.risk": "Risk",
    "accountInfo.momentum": "Momentum",

    "anomalies.allSeverity": "All severity",
    "anomalies.low": "Low",
    "anomalies.medium": "Medium",
    "anomalies.high": "High",
    "anomalies.typePlaceholder": "Type",
    "anomalies.apply": "Apply",
    "anomalies.feedTitle": "Anomaly Feed",
    "anomalies.wallet": "wallet",
    "anomalies.severity": "severity",
    "anomalies.ack": "Acknowledge",
    "anomalies.acking": "...",
    "anomalies.detailTitle": "Anomaly",
    "anomalies.type": "type",
    "anomalies.description": "Description",
    "anomalies.evidence": "Evidence",

    "method.title": "Three-Layer Framework",
    "method.body": "Layer1: PnL facts. Layer2: strategy classification. Layer3: information timing edge.",
    "method.d1": "Scores are probabilistic estimates.",
    "method.d2": "Classification is not evidence of wrongdoing.",
    "method.d3": "This tool is for educational and research purposes only.",
    "share.title": "Share Card",
    "share.preview": "Preview link",
    "share.copyLink": "Copy share link",
    "share.copied": "Copied",
    "share.copyFailed": "Copy failed",
    "share.trades": "trades",
    "share.realizedPnl": "realized PnL",
    "share.score": "score",
    "share.updatedAt": "updated at",

    "ai.trigger": "Trigger AI Analysis",
    "ai.loading": "Analyzing...",
    "ai.updatedAt": "Updated at",
    "ai.requestFailed": "request failed",
    "ai.failedPrefix": "Analyze failed",
    "watchlist.title": "My Watchlist",
    "watchlist.feedTitle": "Watchlist Updates",
    "watchlist.empty": "No wallets followed yet.",
    "watchlist.loading": "Loading...",
    "watchlist.follow": "Follow",
    "watchlist.unfollow": "Unfollow",
    "watchlist.following": "Saving...",
    "watchlist.failed": "Operation failed",
    "watchlist.eventType": "event",
    "watchlist.eventTime": "time",

    "copyTrade.title": "AI Copy Trading",
    "copyTrade.dashboard": "Copy Trading Dashboard",
    "copyTrade.enable": "Enable AI Copy Trading",
    "copyTrade.disable": "Disable",
    "copyTrade.settings": "Settings",
    "copyTrade.maxPosition": "Max Position (USDC)",
    "copyTrade.riskPreference": "Risk Preference",
    "copyTrade.conservative": "Conservative",
    "copyTrade.moderate": "Moderate",
    "copyTrade.aggressive": "Aggressive",
    "copyTrade.confirm": "Confirm",
    "copyTrade.totalPnl": "Total PnL",
    "copyTrade.winRate": "Win Rate",
    "copyTrade.totalCopies": "Total Copies",
    "copyTrade.totalSkipped": "Total Skipped",
    "copyTrade.openPositions": "Open Positions",
    "copyTrade.activeConfigs": "Active Configs",
    "copyTrade.recentDecisions": "Recent Decisions",
    "copyTrade.copy": "Copy",
    "copyTrade.skip": "Skip",
    "copyTrade.confidence": "Confidence",
    "copyTrade.reasoning": "Reasoning",
    "copyTrade.riskNotes": "Risk Notes",
    "copyTrade.decisions": "Decisions",
    "copyTrade.performance": "Performance",
    "copyTrade.positions": "Open Positions",
    "copyTrade.close": "Close Position",
    "copyTrade.closing": "Closing...",
    "copyTrade.noConfigs": "No copy trading configs yet.",
    "copyTrade.noDecisions": "No decisions yet.",
    "copyTrade.noPositions": "No open positions.",
    "copyTrade.agentWill": "AI Agent will:",
    "copyTrade.agentAnalyze": "Analyze each new trade from this wallet",
    "copyTrade.agentDecide": "Decide whether to copy and determine position size",
    "copyTrade.agentExplain": "Provide reasoning for each decision",
    "copyTrade.simulated": "Simulated",

    "monitor.title": "System Monitor",
    "monitor.enabledConfigs": "Enabled Configs",
    "monitor.totalRuns24h": "Runs (24h)",
    "monitor.hourlyStats": "Hourly Stats",
    "monitor.hour": "Hour",
    "monitor.runs": "Runs",
    "monitor.walletsChecked": "Wallets Checked",
    "monitor.newTrades": "New Trades",
    "monitor.copies": "Copies",
    "monitor.skips": "Skips",
    "monitor.errors": "Errors",
    "monitor.recentRuns": "Recent Syncer Runs",
    "monitor.status": "Status",
    "monitor.duration": "Duration",
    "monitor.stats": "Stats",
    "monitor.copyableWallets": "Copyable Wallets",
    "monitor.score": "Score",
    "monitor.tier": "Tier",
    "monitor.strategy": "Strategy",
    "monitor.pnl30d": "30D PnL",
    "monitor.trades30d": "30D Trades",
    "monitor.noRuns": "No syncer runs yet.",
    "monitor.noHourly": "No hourly data yet.",
    "monitor.noCopyable": "No copyable wallets found."
  },
  zh: {
    "app.subtitle": "Polymarket 智能钱包分析器",
    "nav.dashboard": "总览",
    "nav.discover": "发现",
    "nav.explore": "探索",
    "nav.tracking": "跟踪",
    "nav.more": "更多",
    "nav.wallets": "钱包",
    "nav.watchlist": "关注",
    "nav.markets": "市场",
    "nav.leaderboard": "排行榜",
    "nav.anomalies": "异常",
    "nav.methodology": "方法论",
    "lang.en": "EN",
    "lang.zh": "中文",

    "home.marketsIndexed": "已索引市场",
    "home.potentialWallets": "潜力钱包（交易>=100 且收益>0）",
    "home.newPotential24h": "24小时新增潜力钱包",
    "home.topRealized24h": "24小时收益 Top",
    "home.topAIConfidence": "AI 高置信 Top",
    "home.aiAnalyzedTop5": "Top5 中已 AI 分析",
    "home.topPotential": "潜力钱包 Top",
    "home.viewAll": "查看全部",
    "home.trades": "交易",
    "home.realizedPnl": "已实现收益",
    "home.score": "评分",
    "home.model": "模型",
    "home.summaryFallback": "暂无 AI 摘要",

    "wallets.minTrades": "最少交易数",
    "wallets.minPnl": "最小已实现收益",
    "wallets.apply": "应用",
    "wallets.potentialCount": "潜力钱包总数",
    "wallets.analyzedPage": "当前页已 AI 分析",
    "wallets.filterRule": "筛选规则",
    "wallets.ruleValue": "按交易数降序 + 正收益",
    "wallets.title": "潜力钱包列表",
    "wallets.sortHint": "默认按交易数降序，其次按已实现收益降序。",
    "wallets.tagPotential": "潜力",
    "wallets.tagAnalyzed": "已 AI 分析",
    "wallets.tagNotAnalyzed": "未分析",
    "wallets.strategyUnknown": "未知",
    "wallets.unnamed": "未命名",

    "profile.layer1": "Layer1 盈亏",
    "profile.realizedPnl": "已实现收益",
    "profile.tradingPnl": "交易盈亏",
    "profile.makerRebates": "做市返佣",
    "profile.feesPaid": "手续费",
    "profile.totalTrades": "总交易数",
    "profile.volume30d": "30天交易额",
    "profile.strategySnapshot": "策略快照",
    "profile.score": "评分",
    "profile.layer3": "Layer3 时序优势",
    "profile.label": "标签",
    "profile.meanDt": "平均时延",
    "profile.samples": "样本",
    "profile.stddev": "标准差",
    "profile.pvalue": "p值",
    "profile.aiAnalysis": "AI 分析",
    "profile.aiKeySignals": "AI 关键信号",
    "profile.aiWarnings": "风险提示",
    "profile.aiNoWarnings": "未发现明确风险提示。",
    "profile.aiGeneratedAt": "生成时间",
    "profile.aiRawJson": "AI 原始 JSON",
    "profile.aiOpenJson": "展开 JSON",
    "profile.noSummary": "模型未返回摘要。",
    "profile.model": "模型",
    "profile.tokens": "tokens",
    "profile.noReport": "尚无 AI 报告，可点击按钮触发分析。",
    "profile.history": "历史",
    "profile.evidence": "证据快照",

    "markets.categoryPlaceholder": "分类，例如 Politics",
    "markets.apply": "应用",
    "markets.title": "市场列表",
    "markets.vol": "成交量",
    "markets.liq": "流动性",

    "leaderboard.title": "排行榜",
    "leaderboard.score": "评分",
    "leaderboard.rank": "排名",
    "leaderboard.name": "名称",
    "leaderboard.strategy": "策略",
    "leaderboard.smartScore": "智能评分",
    "leaderboard.pnl": "收益",
    "leaderboard.trades": "交易数",
    "leaderboard.tier": "等级",
    "leaderboard.sortByScore": "评分",
    "leaderboard.sortByPnl": "收益",
    "leaderboard.sortByTrades": "交易",

    "positions.market": "市场",
    "positions.category": "分类",
    "positions.netSize": "净头寸",
    "positions.avgPrice": "均价",
    "positions.tradeCount": "交易数",
    "positions.lastActive": "最近活跃",
    "positions.title": "持仓",
    "positions.totalVolume": "交易量",

    "tradeHistory.title": "交易记录",
    "tradeHistory.time": "时间",
    "tradeHistory.market": "市场",
    "tradeHistory.outcome": "方向",
    "tradeHistory.action": "操作",
    "tradeHistory.price": "价格",
    "tradeHistory.size": "数量",
    "tradeHistory.fee": "手续费",
    "tradeHistory.buy": "买入",
    "tradeHistory.sell": "卖出",
    "tradeHistory.yes": "Yes",
    "tradeHistory.no": "No",

    "pnlChart.title": "收益曲线",
    "pnlChart.7d": "7天",
    "pnlChart.30d": "30天",
    "pnlChart.90d": "90天",

    "accountInfo.realizedPnl": "已实现收益",
    "accountInfo.totalTrades": "总交易数",
    "accountInfo.volume30d": "30天交易额",
    "accountInfo.smartScore": "智能评分",
    "accountInfo.risk": "风险",
    "accountInfo.momentum": "动量",

    "anomalies.allSeverity": "全部等级",
    "anomalies.low": "低",
    "anomalies.medium": "中",
    "anomalies.high": "高",
    "anomalies.typePlaceholder": "类型",
    "anomalies.apply": "应用",
    "anomalies.feedTitle": "异常列表",
    "anomalies.wallet": "钱包",
    "anomalies.severity": "等级",
    "anomalies.ack": "确认",
    "anomalies.acking": "...",
    "anomalies.detailTitle": "异常",
    "anomalies.type": "类型",
    "anomalies.description": "描述",
    "anomalies.evidence": "证据",

    "method.title": "三层分析框架",
    "method.body": "Layer1：盈亏事实。Layer2：策略分类。Layer3：信息时序优势。",
    "method.d1": "评分是概率性估计。",
    "method.d2": "分类不构成违规证据。",
    "method.d3": "本工具仅用于教育与研究目的。",
    "share.title": "分享卡片",
    "share.preview": "预览链接",
    "share.copyLink": "复制分享链接",
    "share.copied": "已复制",
    "share.copyFailed": "复制失败",
    "share.trades": "交易",
    "share.realizedPnl": "已实现收益",
    "share.score": "评分",
    "share.updatedAt": "更新时间",

    "ai.trigger": "触发 AI 分析",
    "ai.loading": "分析中...",
    "ai.updatedAt": "更新时间",
    "ai.requestFailed": "请求失败",
    "ai.failedPrefix": "分析失败",
    "watchlist.title": "我的关注",
    "watchlist.feedTitle": "关注更新",
    "watchlist.empty": "还没有关注的钱包。",
    "watchlist.loading": "加载中...",
    "watchlist.follow": "关注",
    "watchlist.unfollow": "取消关注",
    "watchlist.following": "处理中...",
    "watchlist.failed": "操作失败",
    "watchlist.eventType": "事件",
    "watchlist.eventTime": "时间",

    "copyTrade.title": "AI 跟单",
    "copyTrade.dashboard": "跟单仪表盘",
    "copyTrade.enable": "开启 AI 跟单",
    "copyTrade.disable": "关闭",
    "copyTrade.settings": "设置",
    "copyTrade.maxPosition": "最大仓位 (USDC)",
    "copyTrade.riskPreference": "风险偏好",
    "copyTrade.conservative": "保守",
    "copyTrade.moderate": "中等",
    "copyTrade.aggressive": "激进",
    "copyTrade.confirm": "确认开启",
    "copyTrade.totalPnl": "总收益",
    "copyTrade.winRate": "胜率",
    "copyTrade.totalCopies": "总跟单数",
    "copyTrade.totalSkipped": "跳过数",
    "copyTrade.openPositions": "持仓中",
    "copyTrade.activeConfigs": "活跃配置",
    "copyTrade.recentDecisions": "最近决策",
    "copyTrade.copy": "跟单",
    "copyTrade.skip": "跳过",
    "copyTrade.confidence": "置信度",
    "copyTrade.reasoning": "决策理由",
    "copyTrade.riskNotes": "风险提示",
    "copyTrade.decisions": "决策记录",
    "copyTrade.performance": "绩效",
    "copyTrade.positions": "持仓",
    "copyTrade.close": "平仓",
    "copyTrade.closing": "平仓中...",
    "copyTrade.noConfigs": "还没有跟单配置。",
    "copyTrade.noDecisions": "还没有决策记录。",
    "copyTrade.noPositions": "没有持仓。",
    "copyTrade.agentWill": "AI Agent 将会：",
    "copyTrade.agentAnalyze": "分析该钱包的每笔新交易",
    "copyTrade.agentDecide": "自动决定是否跟单及仓位大小",
    "copyTrade.agentExplain": "给出每笔决策的自然语言理由",
    "copyTrade.simulated": "模拟",

    "monitor.title": "系统监控",
    "monitor.enabledConfigs": "已启用配置",
    "monitor.totalRuns24h": "运行次数 (24h)",
    "monitor.hourlyStats": "每小时统计",
    "monitor.hour": "时间",
    "monitor.runs": "运行",
    "monitor.walletsChecked": "检查钱包",
    "monitor.newTrades": "新交易",
    "monitor.copies": "跟单",
    "monitor.skips": "跳过",
    "monitor.errors": "错误",
    "monitor.recentRuns": "最近同步运行",
    "monitor.status": "状态",
    "monitor.duration": "耗时",
    "monitor.stats": "统计",
    "monitor.copyableWallets": "可跟单钱包",
    "monitor.score": "评分",
    "monitor.tier": "等级",
    "monitor.strategy": "策略",
    "monitor.pnl30d": "30天收益",
    "monitor.trades30d": "30天交易",
    "monitor.noRuns": "暂无同步运行记录。",
    "monitor.noHourly": "暂无每小时数据。",
    "monitor.noCopyable": "暂无可跟单钱包。"
  }
};

export function normalizeLocale(input?: string | null): Locale {
  if (!input) return "en";
  return input.toLowerCase().startsWith("zh") ? "zh" : "en";
}

export function t(locale: Locale, key: string): string {
  return messages[locale][key] || messages.en[key] || key;
}
